<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>

<BorderPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.github.matyassladek.ac_wgp.controllers.EventResultsController"
            stylesheets="@../styles/modern-theme.css"
            styleClass="root">

    <!-- Header Section -->
    <top>
        <VBox spacing="20" styleClass="header-section">
            <padding>
                <Insets top="25" right="25" bottom="25" left="25"/>
            </padding>

            <HBox alignment="CENTER_LEFT" spacing="15">
                <Label text="🏁" style="-fx-font-size: 48px;"/>
                <VBox>
                    <Label text="RACE RESULTS" styleClass="title">
                        <font>
                            <Font name="System Bold" size="36"/>
                        </font>
                    </Label>
                    <Label text="Drag and drop drivers to their finishing positions"
                           styleClass="subtitle">
                        <font>
                            <Font size="14"/>
                        </font>
                    </Label>
                </VBox>
            </HBox>

            <!-- Action Buttons Row -->
            <HBox spacing="15" alignment="CENTER">
                <Button onAction="#onLoadFromJsonButtonClick"
                        text="📂 LOAD FROM JSON"
                        styleClass="success-button"
                        prefWidth="200" prefHeight="40">
                    <font>
                        <Font name="System Bold" size="14"/>
                    </font>
                </Button>

                <Button onAction="#onClearResultsButtonClick"
                        text="🗑️ CLEAR RESULTS"
                        styleClass="danger-button"
                        prefWidth="200" prefHeight="40">
                    <font>
                        <Font name="System Bold" size="14"/>
                    </font>
                </Button>

                <Region HBox.hgrow="ALWAYS"/>

                <Label text="💡 Tip: You can also drag drivers out of positions to return them to the pool"
                       styleClass="status-label info"
                       style="-fx-font-size: 12px;"/>
            </HBox>
        </VBox>
    </top>

    <!-- Main Content Area -->
    <center>
        <HBox spacing="30" style="-fx-padding: 30;">

            <!-- Positions Section -->
            <VBox spacing="15" HBox.hgrow="ALWAYS">
                <Label text="Finishing Order" styleClass="section-label">
                    <font>
                        <Font name="System Bold" size="18"/>
                    </font>
                </Label>

                <HBox spacing="30">

                    <!-- Left Grid: Positions 1–10 -->
                    <GridPane hgap="15" vgap="8" styleClass="card" HBox.hgrow="ALWAYS">
                        <padding>
                            <Insets top="20" right="20" bottom="20" left="20"/>
                        </padding>
                        <columnConstraints>
                            <ColumnConstraints minWidth="50" prefWidth="60" maxWidth="80"/>
                            <ColumnConstraints minWidth="200" prefWidth="250" hgrow="ALWAYS"/>
                        </columnConstraints>

                        <!-- Header -->
                        <Label text="POS" GridPane.columnIndex="0" GridPane.rowIndex="0" alignment="CENTER"
                               style="-fx-font-weight: bold; -fx-font-size: 14px;"/>
                        <Label text="DRIVER" GridPane.columnIndex="1" GridPane.rowIndex="0"
                               style="-fx-font-weight: bold; -fx-font-size: 14px;"/>

                        <!-- Positions 1–3 with podium colors -->
                        <HBox alignment="CENTER" GridPane.columnIndex="0" GridPane.rowIndex="2">
                            <Label text="1" style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: #FFD700;"/>
                        </HBox>
                        <Label fx:id="dropTargetPosition1" text="Drop Here"
                               GridPane.columnIndex="1" GridPane.rowIndex="2"
                               styleClass="drop-target" style="-fx-min-height: 40px; -fx-alignment: center-left;"/>

                        <HBox alignment="CENTER" GridPane.columnIndex="0" GridPane.rowIndex="3">
                            <Label text="2" style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: #C0C0C0;"/>
                        </HBox>
                        <Label fx:id="dropTargetPosition2" text="Drop Here"
                               GridPane.columnIndex="1" GridPane.rowIndex="3"
                               styleClass="drop-target" style="-fx-min-height: 40px; -fx-alignment: center-left;"/>

                        <HBox alignment="CENTER" GridPane.columnIndex="0" GridPane.rowIndex="4">
                            <Label text="3" style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: #CD7F32;"/>
                        </HBox>
                        <Label fx:id="dropTargetPosition3" text="Drop Here"
                               GridPane.columnIndex="1" GridPane.rowIndex="4"
                               styleClass="drop-target" style="-fx-min-height: 40px; -fx-alignment: center-left;"/>

                        <!-- Positions 4–10 uniform structure -->
                        <HBox alignment="CENTER" GridPane.columnIndex="0" GridPane.rowIndex="5">
                            <Label text="4"/>
                        </HBox>
                        <Label fx:id="dropTargetPosition4" text="Drop Here"
                               GridPane.columnIndex="1" GridPane.rowIndex="5"
                               styleClass="drop-target"/>

                        <HBox alignment="CENTER" GridPane.columnIndex="0" GridPane.rowIndex="6">
                            <Label text="5"/>
                        </HBox>
                        <Label fx:id="dropTargetPosition5" text="Drop Here"
                               GridPane.columnIndex="1" GridPane.rowIndex="6"
                               styleClass="drop-target"/>

                        <HBox alignment="CENTER" GridPane.columnIndex="0" GridPane.rowIndex="7">
                            <Label text="6"/>
                        </HBox>
                        <Label fx:id="dropTargetPosition6" text="Drop Here"
                               GridPane.columnIndex="1" GridPane.rowIndex="7"
                               styleClass="drop-target"/>

                        <HBox alignment="CENTER" GridPane.columnIndex="0" GridPane.rowIndex="8">
                            <Label text="7"/>
                        </HBox>
                        <Label fx:id="dropTargetPosition7" text="Drop Here"
                               GridPane.columnIndex="1" GridPane.rowIndex="8"
                               styleClass="drop-target"/>

                        <HBox alignment="CENTER" GridPane.columnIndex="0" GridPane.rowIndex="9">
                            <Label text="8"/>
                        </HBox>
                        <Label fx:id="dropTargetPosition8" text="Drop Here"
                               GridPane.columnIndex="1" GridPane.rowIndex="9"
                               styleClass="drop-target"/>

                        <HBox alignment="CENTER" GridPane.columnIndex="0" GridPane.rowIndex="10">
                            <Label text="9"/>
                        </HBox>
                        <Label fx:id="dropTargetPosition9" text="Drop Here"
                               GridPane.columnIndex="1" GridPane.rowIndex="10"
                               styleClass="drop-target"/>

                        <HBox alignment="CENTER" GridPane.columnIndex="0" GridPane.rowIndex="11">
                            <Label text="10"/>
                        </HBox>
                        <Label fx:id="dropTargetPosition10" text="Drop Here"
                               GridPane.columnIndex="1" GridPane.rowIndex="11"
                               styleClass="drop-target"/>
                    </GridPane>

                    <!-- Right Grid: Positions 11–20 -->
                    <GridPane hgap="15" vgap="8" styleClass="card" HBox.hgrow="ALWAYS">
                        <padding>
                            <Insets top="20" right="20" bottom="20" left="20"/>
                        </padding>
                        <columnConstraints>
                            <ColumnConstraints minWidth="50" prefWidth="60" maxWidth="80"/>
                            <ColumnConstraints minWidth="200" prefWidth="250" hgrow="ALWAYS"/>
                        </columnConstraints>

                        <!-- Header -->
                        <Label text="POS" GridPane.columnIndex="0" GridPane.rowIndex="0" alignment="CENTER"
                               style="-fx-font-weight: bold; -fx-font-size: 14px;"/>
                        <Label text="DRIVER" GridPane.columnIndex="1" GridPane.rowIndex="0"
                               style="-fx-font-weight: bold; -fx-font-size: 14px;"/>

                        <!-- Positions 11–20 -->
                        <HBox alignment="CENTER" GridPane.columnIndex="0" GridPane.rowIndex="2">
                            <Label text="11"/>
                        </HBox>
                        <Label fx:id="dropTargetPosition11" text="Drop Here"
                               GridPane.columnIndex="1" GridPane.rowIndex="2"
                               styleClass="drop-target"/>

                        <HBox alignment="CENTER" GridPane.columnIndex="0" GridPane.rowIndex="3">
                            <Label text="12"/>
                        </HBox>
                        <Label fx:id="dropTargetPosition12" text="Drop Here"
                               GridPane.columnIndex="1" GridPane.rowIndex="3"
                               styleClass="drop-target"/>

                        <HBox alignment="CENTER" GridPane.columnIndex="0" GridPane.rowIndex="4">
                            <Label text="13"/>
                        </HBox>
                        <Label fx:id="dropTargetPosition13" text="Drop Here"
                               GridPane.columnIndex="1" GridPane.rowIndex="4"
                               styleClass="drop-target"/>

                        <HBox alignment="CENTER" GridPane.columnIndex="0" GridPane.rowIndex="5">
                            <Label text="14"/>
                        </HBox>
                        <Label fx:id="dropTargetPosition14" text="Drop Here"
                               GridPane.columnIndex="1" GridPane.rowIndex="5"
                               styleClass="drop-target"/>

                        <HBox alignment="CENTER" GridPane.columnIndex="0" GridPane.rowIndex="6">
                            <Label text="15"/>
                        </HBox>
                        <Label fx:id="dropTargetPosition15" text="Drop Here"
                               GridPane.columnIndex="1" GridPane.rowIndex="6"
                               styleClass="drop-target"/>

                        <HBox alignment="CENTER" GridPane.columnIndex="0" GridPane.rowIndex="7">
                            <Label text="16"/>
                        </HBox>
                        <Label fx:id="dropTargetPosition16" text="Drop Here"
                               GridPane.columnIndex="1" GridPane.rowIndex="7"
                               styleClass="drop-target"/>

                        <HBox alignment="CENTER" GridPane.columnIndex="0" GridPane.rowIndex="8">
                            <Label text="17"/>
                        </HBox>
                        <Label fx:id="dropTargetPosition17" text="Drop Here"
                               GridPane.columnIndex="1" GridPane.rowIndex="8"
                               styleClass="drop-target"/>

                        <HBox alignment="CENTER" GridPane.columnIndex="0" GridPane.rowIndex="9">
                            <Label text="18"/>
                        </HBox>
                        <Label fx:id="dropTargetPosition18" text="Drop Here"
                               GridPane.columnIndex="1" GridPane.rowIndex="9"
                               styleClass="drop-target"/>

                        <HBox alignment="CENTER" GridPane.columnIndex="0" GridPane.rowIndex="10">
                            <Label text="19"/>
                        </HBox>
                        <Label fx:id="dropTargetPosition19" text="Drop Here"
                               GridPane.columnIndex="1" GridPane.rowIndex="10"
                               styleClass="drop-target"/>

                        <HBox alignment="CENTER" GridPane.columnIndex="0" GridPane.rowIndex="11">
                            <Label text="20"/>
                        </HBox>
                        <Label fx:id="dropTargetPosition20" text="Drop Here"
                               GridPane.columnIndex="1" GridPane.rowIndex="11"
                               styleClass="drop-target"/>
                    </GridPane>

                </HBox>

            </VBox>

            <!-- Driver Pool (Right Side) -->
            <VBox spacing="15" prefWidth="450" HBox.hgrow="NEVER">
                <Label text="👥 Available Drivers" styleClass="section-label">
                    <font>
                        <Font name="System Bold" size="18"/>
                    </font>
                </Label>

                <ScrollPane fitToWidth="true" VBox.vgrow="ALWAYS"
                            style="-fx-background-color: transparent; -fx-border-color: -fx-secondary-lighter; -fx-border-width: 1; -fx-border-radius: 8; -fx-background-radius: 8;">
                    <GridPane fx:id="driversList" hgap="10" vgap="8"
                              style="-fx-padding: 15; -fx-background-color: -fx-surface;"/>
                </ScrollPane>

                <HBox spacing="10" styleClass="status-label warning" style="-fx-padding: 12;">
                    <Label text="⚠️" style="-fx-font-size: 14px;"/>
                    <Label text="All positions must be filled before submitting"
                           wrapText="true" HBox.hgrow="ALWAYS" style="-fx-font-size: 12px;"/>
                </HBox>

                <HBox alignment="CENTER_RIGHT" spacing="20"
                      style="-fx-padding: 25; -fx-background-color: derive(-fx-surface, -5%);">
                    <Label text="Ready to submit results?"
                           style="-fx-font-size: 15px; -fx-text-fill: #B3B3B3;"/>
                    <Button onAction="#onSubmitButtonClick"
                            text="✓ SUBMIT RESULTS"
                            styleClass="confirm-button"
                            prefWidth="200" prefHeight="45">
                        <font>
                            <Font name="System Bold" size="16"/>
                        </font>
                    </Button>
                </HBox>
            </VBox>

        </HBox>
    </center>

</BorderPane>